
<template>
    
        
<Dialog v-show="true" :width="420" :height="230">
    <div class="content">
        <div class="tuwen" v-if="tabindex">
            <div class="wen">
                <div>名称：巡检无人机</div>
                <div>编号：xj2022061401</div>
                <div>电量：80%</div>
                <div>已巡检：30km</div>
                <div>状态：正常</div>
                <div>上次检修时间：2022/7/14</div>
            </div>
            <img src="@/assets/images/dialog/kang.png" alt="" @click="tabfn(false)" />
        </div>
        <video width="300" height="180" @click="tabfn(true)" v-if="!tabindex" autoplay loop muted>
            <source src="@/assets/video/kang.mp4" type="video/mp4" />
        </video>
    </div>
</Dialog>
</template>

<script lang="ts" setup>
import _ from 'lodash'
import { useDialogStore } from '@/stores/dialog'
import { onBeforeUnmount, onMounted, ref } from 'vue'
import Dialog from '@/components/Dialog/index.vue'
const dialogStore = useDialogStore()

let str = ref('hello');

const tabindex = ref(true)
const tabfn = (bool: boolean) => {
    tabindex.value = bool
}
const getStartMoveFunc = (cordArr: any[], height: number, interval = 2) => {
    return cordArr.map((item, index) => ({
        time: index * interval,
        coordinate: [item[0], item[1], height || item[2]]
    }))
}

onMounted(async () => {
   await  __g.camera.stopAnimation()
   await  __g.camera.playAnimation(12)
    dialogStore.setDialogVisible(true)
    dialogStore.setTag(`无人机巡检`)
    dialogStore.setXY([1900, 149])

    console.log(`${str}`)
    move()
    setTimeout(async() => {
        console.log(`${ dialogStore.tag}`)
        // await __g.camera.stopAnimation()
    }, 1000)
})

onBeforeUnmount(() => {
    console.log('外关')
    __g.customObject.clear()
    __g.camera.stopAnimation()
})



const move = () => {
    moveList.forEach(async (item, index) => {
        await __g.customObject.add([
            {
                id: 'wrj-' + index, //自定义对象唯一id
                pakFilePath: '@path:DTS_Library.pak', //pak文件路径
                assetPath: '/JC_CustomAssets/ObjectLibrary/Exhibition/交通工具/其他/无人机_1', //资源目录，自定义对象在pak文件资源包里的相对路径
                location: [item[0][0], item[0][1], 30], //位置坐标
                coordinateType: 0, // 坐标系类型
                rotation: [0, 0, 0], //旋转
                scale: [10, 10, 10], //缩放
                smoothMotion: 1 //1: 平滑插值，0: 跳跃
            },
            {
                id: 'wrjArea-' + index, //自定义对象唯一id
                pakFilePath: '@path:智慧农业/智慧农业无人机底下发光.pak', //pak文件路径
                assetPath: '/Game/Developers/CL/Project/BP/WRJ_BP', //资源目录，自定义对象在pak文件资源包里的相对路径
                location: [item[0][0], item[0][1], -10], //位置坐标
                coordinateType: 0, // 坐标系类型
                rotation: [0, 0, 0], //旋转
                scale: [1000, 1000, 1000], //缩放
                smoothMotion: 1 //1: 平滑插值，0: 跳跃
            }
        ])

        await __g.marker.add([
            {
                id: 'markerArea-' + index,
                groupID: '巡检无人机',
                coordinate: [495438.53125, 2490905.75, 2], //坐标位置
                coordinateType: 0, //默认0是投影坐标系，也可以设置为经纬度空间坐标系值为1
                anchors: [-35, 40], //锚点
                range: [0, 10000], //可视范围路径
                fixedSize: true, //图片固定尺寸，取值范围：false 自适应，近大远小，true 固定尺寸，默认值：false
                imagePath: window.origin + require('@/assets/images/marker/marker.png'), //图片路径
                imageSize: [70, 30], //图片尺寸
                text: '巡检无人机', //显示的文字
                useTextAnimation: false, //打开文字展开动画效果
                textRange: [0, 10000], //文本可视范围[近裁距离, 远裁距离]
                textOffset: [-70, -5], // 文本偏移
                textBackgroundColor: [0, 0, 0, 0], //文本背景颜色
                fontSize: 10, //字体大小
                fontOutlineSize: 1, //字体轮廓线大小
                fontColor: [1, 1, 1, 1], //字体颜色
                autoHeight: false, // 自动判断下方是否有物体
                displayMode: 2, //显示模式
                priority: 0, //避让优先级
                occlusionCull: false //是否参与遮挡剔除
            }
        ])
        __g.customObject.startMove('wrj-' + index, 0, getStartMoveFunc(item, 30, 1))
        __g.customObject.startMove('wrjArea-' + index, 0, getStartMoveFunc(item, -15, 1))

        __g.marker.setAttachCustomObject([
            {
                markerId: 'markerArea-' + index, //标注id
                objectId: 'wrj-' + index, //自定义对象id
                offset: [0, 0, 0] //偏移量
            }
        ])
    })
}

let moveList = [
    [
        [-2385.974854, -3555.39502, -13.758945],
        [-2402.268555, -3597.906494, -13.758711],
        [-2414.922119, -3653.536133, -14.999961],
        [-2435.497559, -3689.642578, -14.53168],
        [-2458.908203, -3713.455566, -14.999922],
        [-2471.915283, -3748.300537, -13.759219],
        [-2481.516846, -3758.666992, -13.165859],
        [-2516.188477, -3778.911621, -13.671953],
        [-2522.252441, -3784.681885, -13.736094],
        [-2575.287842, -3814.318359, -13.192109],
        [-2612.711914, -3832.939941, -13.652617],
        [-2933.219482, -3829.268555, -13.758789],
        [-2977.114014, -3807.926514, -13.758867],
        [-2984.215088, -3770.033203, -13.758867],
        [-2965.371826, -3703.786865, -14.999922],
        [-2937.942871, -3667.425537, -13.467304],
        [-2927.853516, -3649.565674, -13.086875],
        [-2902.206787, -3634.958496, -13.413125],
        [-2861.593994, -3627.755859, -13.759844],
        [-2829.920898, -3628.941162, -13.759727],
        [-2800.026367, -3629.179443, -13.759805],
        [-2759.870361, -3642.274902, -13.759844],
        [-2731.211914, -3643.320068, -14.440351],
        [-2686.239258, -3643.712158, -13.759766],
        [-2645.633057, -3633.077148, -14.255274],
        [-2586.371338, -3622.740967, -14.999961],
        [-2552.977539, -3599.333008, -15],
        [-2531.327881, -3556.304443, -13.758789],
        [-2518.52417, -3508.752441, -15.000078],
        [-2515.477783, -3458.484131, -13.024023],
        [-2520.806641, -3429.591309, -13.75875],
        [-2535.307861, -3395.22998, -13.526641],
        [-2545.128662, -3386.249756, -13.032227],
        [-2596.053711, -3386.236816, -13.758789],
        [-2637.60083, -3405.30127, -15],
        [-2658.647705, -3446.620361, -14.999922],
        [-2682.943848, -3501.426025, -14.999961],
        [-2698.143555, -3536.409424, -15],
        [-2734.227295, -3549.626465, -13.759336],
        [-2789.866943, -3556.954102, -13.759531],
        [-2816.426758, -3554.038086, -13.760039],
        [-2859.1875, -3551.381836, -13.75957],
        [-2916.247803, -3535.696289, -15],
        [-2969.200684, -3512.054932, -13.639218],
        [-2983.713867, -3492.285645, -13.540508],
        [-2981.309326, -3466.95459, -15],
        [-2884.823242, -3425.952881, -14.999883],
        [-2814.009277, -3409.436035, -15.000039],
        [-2757.182373, -3397.818848, -14.999961],
        [-2699.885254, -3381.03833, -14.718554],
        [-2671.466309, -3366.4729, -13.758906],
        [-2658.483887, -3355.111816, -13.758828],
        [-2653.082031, -3331.610107, -14.999922],
        [-2660.437256, -3303.344482, -13.668125],
        [-2676.671631, -3270.213135, -13.75875],
        [-2688.782715, -3251.486328, -12.726836],
        [-2701.924561, -3246.106934, -13.053633]
    ],
    [
        [-2631.452148, -3221.027588, -13.633086],
        [-2626.145996, -3249.614746, -12.514844],
        [-2618.713379, -3280.44043, -11.802227],
        [-2610.580811, -3307.372559, -13.372734],
        [-2608.352783, -3328.539307, -13.758867],
        [-2608.334473, -3355.419922, -13.758789],
        [-2615.046875, -3382.006592, -14.999961],
        [-2626.171631, -3398.87793, -13.758828],
        [-2642.524902, -3393.681152, -13.758828],
        [-2663.056152, -3385.221924, -13.758867],
        [-2673.464111, -3379.560059, -13.758867],
        [-2676.203369, -3377.647461, -13.758789],
        [-2717.328857, -3332.678711, -13.758828],
        [-2728.714355, -3309.543213, -13.326289],
        [-2739.455322, -3286.901611, -12.971445],
        [-2745.960693, -3260.287598, -13.595196],
        [-2744.157715, -3234.802246, -13.758711],
        [-2737.700439, -3214.682861, -13.758711],
        [-2725.295654, -3202.292725, -13.440625],
        [-2715.175537, -3194.115723, -13.758789],
        [-2699.158203, -3184.8125, -12.73332],
        [-2671.217285, -3175.855225, -13.591758],
        [-2654.095703, -3172.944336, -13.750937],
        [-2601.031494, -3173.514648, -13.719492],
        [-2580.753662, -3175.697754, -13.719453],
        [-2539.246094, -3176.611816, -13.719453],
        [-2531.024658, -3168.178467, -13.719453],
        [-2535.925293, -3141.819336, -13.719414],
        [-2542.491943, -3121.636475, -13.719375],
        [-2557.560791, -3094.530029, -13.719414],
        [-2598.287354, -3053.754639, -13.719492],
        [-2629.04248, -3041.955566, -13.719492],
        [-2660.158203, -3042.416016, -13.719453],
        [-2695.670898, -3041.775391, -13.719492],
        [-2715.567383, -3042.47998, -13.719531],
        [-2744.765381, -3044.621338, -13.719453],
        [-2754.422119, -3049.919922, -13.711133],
        [-2772.077148, -3053.313965, -13.758828],
        [-2796.650879, -3063.178711, -12.603555],
        [-2807.186523, -3079.899902, -13.758828],
        [-2802.955811, -3118.424316, -13.758789],
        [-2806.234619, -3156.565674, -15],
        [-2807.077148, -3192.462402, -13.299063],
        [-2805.08374, -3215.761963, -13.63711],
        [-2804.527588, -3248.779785, -15],
        [-2806.044189, -3261.366211, -15],
        [-2807.548828, -3295.309326, -14.999922],
        [-2813.092041, -3321.176025, -14.999961],
        [-2823.140381, -3360.51709, -14.999961],
        [-2837.889648, -3371.492188, -14.999961],
        [-2866.832275, -3396.77417, -15.000078],
        [-2906.549316, -3422.928955, -15.000078],
        [-2943.887695, -3456.754639, -15.000078],
        [-2947.951172, -3461.05835, -15.000039],
        [-2981.533203, -3480.391846, -13.663789],
        [-3013.70166, -3497.955078, -14.999961],
        [-3039.563965, -3505.568848, -14.999883],
        [-3099.857422, -3521.902588, -15.000039],
        [-3143.022217, -3524.414307, -6.514805],
        [-3177.488037, -3533.80957, -11.077031],
        [-3183.641357, -3522.038818, -3.809883],
        [-3237.762207, -3487.557861, -13.231445],
        [-3239.832275, -3446.032715, -3.779687],
        [-3240.169678, -3427.057129, -5.915312],
        [-3228.695313, -3384.668701, -13.750859],
        [-3173.5354, -3298.646484, -13.758828],
        [-3161.482178, -3286.545898, -13.758867],
        [-3128.087402, -3266.325684, -13.758594],
        [-3109.760254, -3262.957275, -13.758398],
        [-3093.66333, -3262.845947, -13.758359],
        [-3043.436035, -3271.347168, -14.999961],
        [-3008.987793, -3272.036621, -15],
        [-2951.879639, -3266.887207, -15],
        [-2947.490723, -3263.961182, -15],
        [-2925.153076, -3253.110352, -15.000039],
        [-2876.777588, -3183.258789, -15.000039],
        [-2871.630859, -3169.396973, -15],
        [-2863.830566, -3141.084961, -14.999961],
        [-2852.911133, -3094.201904, -14.999922],
        [-2847.770996, -3063.304688, -13.758828],
        [-2852.391357, -3052.42041, -13.747266],
        [-2892.568848, -3046.499756, -15],
        [-2931.792236, -3042.969482, -13.758164],
        [-2978.928711, -3049.091553, -15],
        [-3012.393066, -3054.324707, -15],
        [-3040.906982, -3076.527832, -15],
        [-3055.99707, -3114.903076, -15],
        [-3052.693115, -3183.370605, -13.231836],
        [-3049.112305, -3187.192871, -13.368516],
        [-3013.506836, -3196.021973, -13.758594],
        [-2978.787842, -3187.131592, -15],
        [-2955.552734, -3158.428223, -14.999961],
        [-2946.24707, -3106.5896, -14.999961],
        [-2961.596924, -3093.269043, -14.999922],
        [-2994.107422, -3078.84668, -15]
    ],
    [
        [-2834.197754, -2854.060059, -13.719356],
        [-2825.618652, -2857.12915, -13.719395],
        [-2816.52832, -2862.248779, -13.719375],
        [-2807.185059, -2869.154053, -13.719356],
        [-2803.271973, -2873.205078, -13.719356],
        [-2793.692871, -2886.205566, -13.719356],
        [-2788.523193, -2892.68042, -13.719356],
        [-2784.898193, -2906.204346, -13.719356],
        [-2790.854736, -2913.690674, -13.719395],
        [-2801.032715, -2927.516357, -13.719375],
        [-2806.0354, -2931.89209, -13.719336],
        [-2823.214111, -2943.300293, -13.719316],
        [-2824.466797, -2964.18335, -13.719356],
        [-2822.659424, -3005.268555, -13.051328],
        [-2806.516357, -3032.546875, -13.758789],
        [-2778.620361, -3075.138672, -12.899219],
        [-2751.478516, -3081.008789, -13.670781],
        [-2715.54541, -3079.656494, -13.719453],
        [-2690.014404, -3073.502197, -13.719434],
        [-2662.127441, -3053.116211, -13.719473],
        [-2643.676514, -3033.446777, -13.719434],
        [-2638.281982, -3014.419434, -13.719375],
        [-2636.001221, -2996.16626, -13.719356],
        [-2629.403076, -2960.86792, -13.719414],
        [-2627.836426, -2940.908447, -13.719414],
        [-2629.052246, -2918.155518, -13.719434],
        [-2630.736084, -2899.382568, -13.719434],
        [-2633.983887, -2873.471191, -13.719375],
        [-2637.960693, -2853.671631, -13.719414],
        [-2640.686035, -2826.058838, -13.719375],
        [-2640.903809, -2802.244629, -13.719375],
        [-2646.888916, -2775.043945, -13.719453],
        [-2655.189453, -2755.081543, -13.719375],
        [-2667.824951, -2736.843994, -13.719453],
        [-2673.660889, -2730.231201, -13.719375],
        [-2682.936768, -2724.882568, -13.719453],
        [-2708.85083, -2717.303955, -13.719414],
        [-2721.509277, -2715.675537, -13.719414],
        [-2737.753174, -2713.507813, -13.719336],
        [-2771.127441, -2710.617432, -13.719453],
        [-2812.196777, -2709.522217, -13.719375],
        [-2842.155762, -2712.164307, -13.719492],
        [-2884.293213, -2720.935303, -13.75875],
        [-2922.736572, -2728.363525, -13.758828],
        [-2943.127686, -2734.916992, -13.758789],
        [-2973.182129, -2748.418945, -13.747461],
        [-3001.693115, -2766.182617, -13.758789],
        [-3010.852783, -2781.335205, -13.758828],
        [-3016.091797, -2820.547607, -13.758867],
        [-3018.184326, -2863.292725, -13.758828],
        [-3007.119385, -2887.960693, -13.758867],
        [-2944.296387, -2920.207275, -13.758828],
        [-2884.273193, -2924.389893, -13.758789],
        [-2823.678223, -2936.009033, -13.719375],
        [-2796.971436, -2938.256592, -13.719375],
        [-2733.768555, -2937.843018, -13.719375],
        [-2697.450928, -2907.241211, -13.719336],
        [-2694.203857, -2871.983398, -13.719414],
        [-2695.893555, -2849.470215, -13.719453],
        [-2699.941895, -2831.830322, -13.719336],
        [-2723.395508, -2791.709717, -13.719414],
        [-2773.565674, -2769.208008, -13.719375],
        [-2835.280762, -2758.192383, -13.719336],
        [-2863.969727, -2759.526855, -13.719375],
        [-2882.829102, -2765.68335, -13.719336],
        [-2899.974854, -2776.154297, -13.719336],
        [-2909.204834, -2808.210693, -13.719336],
        [-2912.055176, -2830.256592, -13.719336],
        [-2912.219727, -2859.580322, -13.75918],
        [-2905.690186, -2890.578125, -13.268008],
        [-2898.729004, -2918.71875, -12.847969],
        [-2892.876709, -2946.374023, -13.077773],
        [-2888.804199, -2973.88501, -13.734805],
        [-2880.245361, -2995.62085, -13.326367],
        [-2870.343994, -3011.5271, -12.129531],
        [-2855.678955, -3044.027832, -13.37707],
        [-2843.19873, -3063.420898, -13.681016],
        [-2825.757568, -3082.875244, -13.27879],
        [-2807.917725, -3094.239014, -13.758789]
    ],
    [
        [-2869.902588, -2877.476807, -13.719414],
        [-2909.60083, -2864.753662, -13.461329],
        [-2921.743652, -2864.832275, -13.758554],
        [-2961.544922, -2855.827393, -13.758594],
        [-3015.331055, -2849.621826, -13.750117],
        [-3097.518799, -2854.75293, -13.758906],
        [-3137.134277, -2864.02417, -13.754805],
        [-3152.357178, -2875.396484, -4.511523],
        [-3166.871826, -2913.403809, -13.757969],
        [-3166.02002, -2950.406982, -13.757773],
        [-3142.270264, -2986.766846, -13.75875],
        [-3091.153809, -3003.083496, -15.000039],
        [-3014.081055, -3054.231934, -15.000039],
        [-2998.406982, -3076.164795, -15],
        [-2990.276855, -3096.294678, -14.999922],
        [-2979.962402, -3122.4646, -14.999961],
        [-2973.813965, -3174.967773, -15],
        [-2989.720703, -3233.547607, -15],
        [-3024.358643, -3299.392578, -15.000117],
        [-3079.102783, -3426.676025, -15.000078],
        [-3072.447266, -3458.148438, -15],
        [-3074.847168, -3472.519287, -15],
        [-3049.314941, -3570.048828, -14.999922],
        [-3023.707275, -3598.18457, -14.999922],
        [-2994.144775, -3613.576172, -14.999922],
        [-2963.264648, -3634.966309, -13.757266],
        [-2924.755859, -3662.907715, -13.360859],
        [-2886.490723, -3667.383057, -13.759922],
        [-2822.978516, -3666.384277, -13.76],
        [-2776.114258, -3666.670898, -13.759531],
        [-2727.02417, -3678.053467, -13.76],
        [-2654.021484, -3714.77002, -12.933594],
        [-2570.475098, -3746.115234, -13.749375],
        [-2521.279785, -3750.498535, -13.757656],
        [-2463.895996, -3750.500732, -13.759531],
        [-2429.850586, -3740.676758, -15.000078],
        [-2416.646973, -3660.85498, -15],
        [-2456.08374, -3573.910645, -15.000078],
        [-2510.785156, -3509.967529, -14.999922],
        [-2619.395264, -3429.040039, -13.758828],
        [-2752.470703, -3400.439453, -14.999922],
        [-2818.344971, -3338.39209, -14.999922],
        [-2828.727295, -3313.18042, -15],
        [-2839.343262, -3276.67749, -14.999922],
        [-2901.04541, -3202.705322, -15],
        [-2915.039795, -3162.058838, -15.000039],
        [-2917.369385, -3119.498535, -13.758594],
        [-2885.422852, -3090.479004, -13.758711],
        [-2848.626953, -3073.760742, -13.758789],
        [-2849.28833, -3034.699951, -13.75875],
        [-2887.75293, -2996.790283, -13.75875],
        [-2952.874023, -2990.650391, -14.999922],
        [-3029.59375, -2998.014648, -14.999922]
    ],
    [
        [-2942.789795, -2830.512695, -13.758985],
        [-2936.925537, -2878.730713, -13.758711],
        [-2931.72998, -2905.145508, -13.759296],
        [-2926.063965, -2974.332275, -13.75875],
        [-2923.771729, -3011.800049, -14.999961],
        [-2907.177246, -3067.369629, -13.758828],
        [-2878.029785, -3075.952393, -15.000039],
        [-2834.520508, -3038.275635, -12.619843],
        [-2809.657227, -3027.05835, -13.75875],
        [-2777.859131, -3038.765625, -13.75875],
        [-2752.218994, -3061.716553, -13.749102],
        [-2728.174805, -3093.804932, -13.750546],
        [-2723.806641, -3143.297607, -13.758867],
        [-2732.313232, -3202.624756, -13.284336],
        [-2746.862549, -3239.913086, -13.758789],
        [-2753.320068, -3291.177734, -13.194258],
        [-2728.2854, -3345.08374, -13.758828],
        [-2679.162354, -3357.245605, -13.758828],
        [-2598.179199, -3348.112549, -12.960977],
        [-2543.053955, -3307.936279, -12.315],
        [-2488.836914, -3299.639404, -13.758086],
        [-2409.118652, -3323.455566, -13.148829],
        [-2379.480469, -3381.908447, -13.259258],
        [-2370.122559, -3408.224365, -14.999961],
        [-2371.682373, -3504.241943, -13.75875],
        [-2321.588135, -3684.956543, -13.759727],
        [-2380.263184, -3728.213867, -13.915156],
        [-2364.932617, -3806.487793, -13.760235],
        [-2287.26001, -3824.46582, -15.000078],
        [-2167.539795, -3810.524414, -13.758906],
        [-2131.234619, -3683.064453, -13.758985],
        [-2054.470947, -3566.263428, -13.758828],
        [-1925.796265, -3541.567871, -13.758828],
        [-1799.997559, -3673.696533, -15.000156],
        [-1732.61499, -3767.914795, -13.758985],
        [-1701.802856, -3893.311523, -13.758672],
        [-1774.13269, -3903.881348, -13.75875],
        [-1976.86377, -3806.581299, -13.758906],
        [-2133.796631, -3629.027588, -13.758594],
        [-2225.2229, -3500.334717, -13.758828],
        [-2400.128174, -3332.29541, -12.459922],
        [-2530.123047, -3295.598389, -13.420859],
        [-2609.514648, -3311.480713, -13.535547],
        [-2715.463135, -3245.44165, -13.758828],
        [-2717.100342, -3219.886963, -13.758828],
        [-2583.614502, -3196.703369, -13.719375],
        [-2444.175537, -3194.343018, -13.719531],
        [-2282.118652, -3292.388672, -13.719531],
        [-2192.157715, -3405.388428, -15.000078],
        [-2193.893066, -3500.01001, -13.758985],
        [-2256.512451, -3526.374756, -12.363281],
        [-2436.682129, -3508.274414, -14.999922],
        [-2506.120117, -3451.379883, -12.774453],
        [-2535.748291, -3404.179688, -13.74836]
    ]
]

</script>

<style lang="scss" scoped>
.content {
    @include FontSize(14);
    justify-content: center;
    display: flex;
    .tuwen {
        width: 100%;
        height: 100%;
        display: flex;
        .wen {
            > div {
                @include LineHeight(25);
            }
        }
        img {
            @include MarginLeft(20);
            width: 150px;
            height: 150px;
        }
    }
    video {
        flex: 1;
        width: 100%;
        object-fit: fill;
    }
}
</style>


<!-- 
├── Template 模板层
│   ├── Dialog 弹窗容器
│   │   ├── 图文模式 (v-if="tabindex")
│   │   │   ├── 无人机状态信息
│   │   │   └── 缩略图（点击切换模式）
│   │   └── 视频模式 (v-if="!tabindex")
│   │       └── 视频播放器（点击切换模式）
│
├── Script 逻辑层
│   ├── 核心功能
│   │   ├── moveList：无人机路径坐标数据集（5条巡检路线）
│   │   ├── tabindex：响应式状态控制显示模式
│   │   ├── tabfn()：切换图文/视频模式的触发函数
│   │   ├── getStartMoveFunc()：生成平滑移动轨迹数据
│   │   ├── move()：核心移动逻辑
│   │   │   ├── 添加无人机3D模型
│   │   │   ├── 添加路径标记物
│   │   │   └── 启动移动动画
│   │   └── 生命周期
│   │       ├── onMounted：组件挂载时初始化逻辑
│   │       └── onBeforeUnmount：组件销毁时清理资源
│   └── 依赖项
│       ├── Lodash 工具库
│       ├── Pinia 状态管理（dialogStore）
│       └── 第三方可视化引擎接口（__g对象）
│
└── Style 样式层
    └── SCSS样式模块
        ├── 弹窗内容布局
        ├── 图文模式混合排版
        └── 视频播放器适配




-->